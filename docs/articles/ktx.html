<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Kidney transplantation • kidney.epi</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Kidney transplantation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">kidney.epi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/gfr.html">Estimated glomerular filtration rate (eGFR) calculation</a></li>
    <li><a class="dropdown-item" href="../articles/ktx.html">Kidney transplantation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/services.html">Services</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Kidney transplantation</h1>
                        <h4 data-toc-skip class="author">Boris Bikbov,
<a href="https://Scientific-Tools.Org" class="external-link">Scientific-Tools.Org</a>
</h4>
            
            <h4 data-toc-skip class="date">2025-03-31</h4>
      

      <div class="d-none name"><code>ktx.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="kidney-transplantation">Kidney transplantation<a class="anchor" aria-label="anchor" href="#kidney-transplantation"></a>
</h2>
<p>kidney.epi R package includes functions which useful for kidney
transplantation, and a sample data frame.</p>
<p>See also: [Scientific-Tools.Org], [kidneyepidemiology.org]</p>
<div class="section level3">
<h3 id="dataframes">Dataframes<a class="anchor" aria-label="anchor" href="#dataframes"></a>
</h3>
<ul>
<li>ktx.data - contains data for 10 kidney transplant patients (<em>see
description in documentation</em>).</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://Scientific-Tools.Org/support-us/" class="external-link">kidney.epi</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; The kidney.epi package is made with care by the research consultancy Scientific-Tools.Org.</span></span>
<span><span class="co">#&gt; Contact us at https://Scientific-Tools.Org or via 'maintainer("kidney.epi")' for data analysis or software development.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ktx.data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ptid rec.age don.age don.height don.weight don.ethnicity don.hypertension</span></span>
<span><span class="co">#&gt; 1  149    62.5      68        155       60.0         White              Yes</span></span>
<span><span class="co">#&gt; 2  385    53.5      43        180       90.0         White              N/A</span></span>
<span><span class="co">#&gt; 3  299    69.6      78        168       70.0         White              Yes</span></span>
<span><span class="co">#&gt; 4  224    74.3      68        180      113.0         White              Yes</span></span>
<span><span class="co">#&gt; 5  330    71.5      73        171       68.0         White              Yes</span></span>
<span><span class="co">#&gt; 6  428    67.1      72        163       68.6         White               No</span></span>
<span><span class="co">#&gt;   don.diabetes don.causeofdeath don.creatinine don.hcv don.dcdstatus don.sex</span></span>
<span><span class="co">#&gt; 1           No  cerebrovascular           0.68       N            No    Male</span></span>
<span><span class="co">#&gt; 2          N/A           trauma           0.76       N           Yes  Female</span></span>
<span><span class="co">#&gt; 3           No  cerebrovascular           0.82       N            No    Male</span></span>
<span><span class="co">#&gt; 4           No  cerebrovascular           1.97       N            No  Female</span></span>
<span><span class="co">#&gt; 5           No           trauma           0.63       N            No    Male</span></span>
<span><span class="co">#&gt; 6           No  cerebrovascular           1.13       N           Yes  Female</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h3>
<p>The years from 2014 to 2024 are supported. More is underway. <a href="https://Scientific-Tools.Org" class="external-link">Scientific-Tools.Org</a> provides
research and consulting services for policy makers, industry,
scientists, patient organizations, and citizens. This package is
developed in our free time or with <a href="https://Scientific-Tools.Org/support-us/" class="external-link">your support</a>.</p>
<div class="section level4">
<h4 id="calculate-kdpi-and-kdri-with-ktx-kdpi-optn">Calculate KDPI and KDRI with <code>ktx.kdpi.optn</code><a class="anchor" aria-label="anchor" href="#calculate-kdpi-and-kdri-with-ktx-kdpi-optn"></a>
</h4>
<p>Function ktx.kdpi.optn calculates Kidney Donor Risk Index (KDRI) and
Kidney Donor Profile Index (KDPI) based on the algorithm of US Organ
Procurement and Transplantation Network.</p>
<p>In case you use this function and kidney.epi package for preparation
of a manuscript, please use the following citation: “Bikbov B. R open
source programming code for calculation of the Kidney Donor Profile
Index and Kidney Donor Risk Index. Kidney Disease. 2018; 4:269–272 <a href="doi:10.1159/000492427" class="uri">doi:10.1159/000492427</a>”.</p>
<p>You can use <code>ktx.kdpi.optn</code> function either for
calculation of KDPI and KDRI for a single patient, or for a dataset.</p>
<p>To calculate for a single patient, use the following syntax:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># call ktx.kdpi.optn function, and directly set parameters values</span></span>
<span><span class="fu"><a href="../reference/ktx.kdpi.optn.html">ktx.kdpi.optn</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fl">60</span>, </span>
<span>  height_cm <span class="op">=</span> <span class="fl">168</span>, </span>
<span>  weight_kg <span class="op">=</span> <span class="fl">93</span>, </span>
<span>  ethnicity <span class="op">=</span> <span class="st">"White"</span>, </span>
<span>  hypertension <span class="op">=</span> <span class="st">"yes"</span>, </span>
<span>  diabetes <span class="op">=</span> <span class="st">"no"</span>, </span>
<span>  causeofdeath <span class="op">=</span> <span class="st">"roadinjury"</span>, </span>
<span>  creatinine <span class="op">=</span> <span class="fl">1.4</span>, </span>
<span>  hcv <span class="op">=</span> <span class="st">"negative"</span>, </span>
<span>  dcdstatus <span class="op">=</span> <span class="st">"no"</span>, </span>
<span>  creatinine_units <span class="op">=</span> <span class="st">"mg/dl"</span>, </span>
<span>  return_output_type <span class="op">=</span> <span class="st">"KDRI_Rao"</span><span class="op">)</span></span>
<span><span class="co">#&gt; For the calculations of KDRI and KDPI the  2024  year is used for mapping values, KDRI scaling factor, as well as chances of hypertension and diabetes in case if they were unknown for donor.</span></span>
<span><span class="co">#&gt; [1] 1.8</span></span></code></pre></div>
<p>To calculate for a multiple patients in a dataset, use the following
syntax:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># copy internal dataframe ktx.data from the kidney.epiR package to your data frame</span></span>
<span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="va">ktx.data</span></span>
<span></span>
<span><span class="co"># calculate Kidney Donor Profile Index (KDPI) using the latest available OPTN mapping values</span></span>
<span><span class="va">mydata</span><span class="op">$</span><span class="va">kdpi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ktx.kdpi.optn.html">ktx.kdpi.optn</a></span> <span class="op">(</span> age <span class="op">=</span> <span class="va">mydata</span><span class="op">$</span><span class="va">don.age</span>,</span>
<span>  height_cm <span class="op">=</span> <span class="va">mydata</span><span class="op">$</span><span class="va">don.height</span>, weight_kg <span class="op">=</span> <span class="va">mydata</span><span class="op">$</span><span class="va">don.weight</span>,</span>
<span>  ethnicity <span class="op">=</span> <span class="va">mydata</span><span class="op">$</span><span class="va">don.ethnicity</span>, hypertension <span class="op">=</span> <span class="va">mydata</span><span class="op">$</span><span class="va">don.hypertension</span>,</span>
<span>  diabetes <span class="op">=</span> <span class="va">mydata</span><span class="op">$</span><span class="va">don.diabetes</span>, causeofdeath <span class="op">=</span> <span class="va">mydata</span><span class="op">$</span><span class="va">don.causeofdeath</span>,</span>
<span>  creatinine <span class="op">=</span> <span class="va">mydata</span><span class="op">$</span><span class="va">don.creatinine</span>, hcv <span class="op">=</span> <span class="va">mydata</span><span class="op">$</span><span class="va">don.hcv</span>,</span>
<span>  dcdstatus <span class="op">=</span> <span class="va">mydata</span><span class="op">$</span><span class="va">don.dcd</span>, creatinine_units <span class="op">=</span> <span class="st">"mg/dl"</span>,</span>
<span>  <span class="co"># which param to return</span></span>
<span>  return_output_type <span class="op">=</span> <span class="st">"KDPI"</span>,</span>
<span>  <span class="co"># customize all labels used in the dataframe</span></span>
<span>  <span class="co"># label for Afroamerican ethnicity </span></span>
<span>  label_afroamerican <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"Afroamerican"</span><span class="op">)</span>,</span>
<span>  <span class="co"># label for a positive history of hypertension</span></span>
<span>  label_hypertension_positive <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"Yes"</span>, <span class="st">"YES"</span><span class="op">)</span>,</span>
<span>  <span class="co"># label for an unknown history of hypertension</span></span>
<span>  label_hypertension_unknown <span class="op">=</span> <span class="st">"N/A"</span>, <span class="co"># if missing values defined unknown history then use "NA" (with quotes!)</span></span>
<span>  <span class="co"># label for a positive history of diabetes</span></span>
<span>  label_diabetes_positive <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"Yes"</span>, <span class="st">"YES"</span><span class="op">)</span>,</span>
<span>  <span class="co"># label for an unknown history of diabetes</span></span>
<span>  label_diabetes_unknown <span class="op">=</span> <span class="st">"N/A"</span>, <span class="co"># if missing values defined unknown history then use "NA" (with quotes!)</span></span>
<span>  <span class="co"># label for a cause of death due to cerebrovascular/stroke</span></span>
<span>  label_causeofdeath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"cerebrovascular"</span><span class="op">)</span>,</span>
<span>  <span class="co"># label for a positive hcv status</span></span>
<span>  label_hcv_positive <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"positive"</span><span class="op">)</span>,</span>
<span>  <span class="co"># label for an unknown, not done, indeterminate, or pending hcv status</span></span>
<span>  label_hcv_unknown <span class="op">=</span> <span class="st">"NA"</span>, <span class="co"># if missing values defined unknown history then use "NA" (with quotes!)</span></span>
<span>  <span class="co"># label for a donation after circulatory death status</span></span>
<span>  label_dcdstatus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"Yes"</span><span class="op">)</span></span>
<span><span class="op">)</span> </span>
<span><span class="co">#&gt; For the calculations of KDRI and KDPI the  2024  year is used for mapping values, KDRI scaling factor, as well as chances of hypertension and diabetes in case if they were unknown for donor.</span></span>
<span></span>
<span><span class="co"># show descriptive stat for the calculated values</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">$</span><span class="va">kdpi</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   37.00   93.25   95.50   89.10   97.00  100.00</span></span></code></pre></div>
<p>Take in account that the labels used in parameters of the function
have to correspond to the labels used in your data frame. In the example
above the labels for positive history of hypertension are defined as
<em>label_hypertension_positive = c (“Yes”, “YES”)</em> that means in
the data frame it could be either “Yes” or “YES”. In case you use
different labeling in your data frame, define this appropriately. For
example, if you define a positive history of hypertension as 1 and
negative history as 0, you have to change the labeling in parameters of
the function to <em>label_hypertension_positive = c (1)</em>.</p>
<p><strong>Important notice on NA (not available values)</strong><br>
Be careful with labeling of missing/unknown data for a history of
hypertension and diabetes.<br>
If donors with an unknown history of hypertension in your data file has
a standard R missing value NA, set the parameter
label_hypertension_unknown = “NA” <em>(with quotes!)</em>.<br>
If donors with an unknown history of hypertension in your data file
defined as “no data”, set the parameter label_hypertension_unknown = “no
data”.<br>
If donors with an unknown history of hypertension in your data file
defined as 999, set the parameter label_hypertension_unknown = 999.</p>
<p>Note that by default KDPI and KDRI are calculated by the latest
available OPTN revision (by default the parameter is
<code>mapping_values_year</code> = “latest”). If you wish to change the
reference year, set the <code>mapping_values_year</code> equal to the
year. To see for which years the OPTN revision is available in the R
package, use function <code><a href="../reference/ktx.kdpi.optn.show.years.html">ktx.kdpi.optn.show.years()</a></code>.</p>
</div>
<div class="section level4">
<h4 id="show-years-available-in-the-optn-mapping-table-with-ktx-kdpi-optn-show-years">Show years available in the OPTN mapping table with
<code>ktx.kdpi.optn.show.years</code><a class="anchor" aria-label="anchor" href="#show-years-available-in-the-optn-mapping-table-with-ktx-kdpi-optn-show-years"></a>
</h4>
<p>Shows which years are available in the R package for the OPTN mapping
table, KDRI scaling factor, etc. These years could be defined in the
<code>mapping_values_year</code> parameter of the
<code>ktx.kdpi.optn</code> function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ktx.kdpi.optn.show.years.html">ktx.kdpi.optn.show.years</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; The following years are presented in tables with OPTN mapping values, KDRI scaling factor, etc. </span></span>
<span><span class="co">#&gt;  [1] 2014 2015 2016 2017 2018 2019 2020 2021 2022 2023 2024</span></span>
<span><span class="co">#&gt; You can use any of this years in the mapping_values_year parameter of the ktx.kdpi.optn function for mapping calculations of KDPI and KDRI.</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<ul>
<li>Rao PS, Schaubel DE, Guidinger MK, Andreoni KA. A Comprehensive Risk
Quantification Score for Deceased Donor Kidneys: The Kidney Donor Risk
Index. Transplantation 2009; 88: 231–6.<br>
</li>
<li>Guide to calculating and interpreting KDPI could be found at <a href="https://optn.transplant.hrsa.gov/media/1512/guide_to_calculating_interpreting_kdpi.pdf" class="external-link uri">https://optn.transplant.hrsa.gov/media/1512/guide_to_calculating_interpreting_kdpi.pdf</a><br>
</li>
<li>Bikbov B. R open source programming code for calculation of the
Kidney Donor Profile Index and Kidney Donor Risk Index. Kidney Disease.
2018; 4:269–272 <a href="doi:10.1159/000492427" class="uri">doi:10.1159/000492427</a>
</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer" style="display: flex; justify-content: space-between; align-items: center;">
  <p>Developed by <a href="https://www.linkedin.com/in/boris-bikbov" target="_blank" class="external-link">Boris Bikbov</a>, <a href="https://Scientific-Tools.Org" target="_blank" class="external-link">Scientific-Tools.Org</a></p>
  <p>Built with <a href="https://pkgdown.r-lib.org" target="_blank" class="external-link">pkgdown</a></p>
</div>

    </footer>
</div>





  </body>
</html>
